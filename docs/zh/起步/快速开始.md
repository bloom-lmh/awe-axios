# 快速开始

## 安装

```bash
# 使用npm
npm install axios-plus --save

# 使用yarn
yarn add axios-plus
```

## 基础使用示例

### 创建 API 服务类

```typescript
import { HttpApi, Get, Post, QueryParam, BodyParam } from 'axios-plus';

@HttpApi({
  baseURL: 'https://api.example.com',
})
class UserService {
  // GET请求示例
  @Get('/users')
  getUserList(@QueryParam('page') page: number, @QueryParam('size') size: number) {}

  // POST请求示例
  @Post('/users')
  createUser(@BodyParam() userData: { name: string; age: number }) {}

  // 带路径参数的请求
  @Get('/users/{id}')
  getUserDetail(@PathParam('id') userId: string) {}
}
```

### 使用 API 服务

```typescript
// 初始化服务实例
const userService = new UserService();

// 调用接口
async function fetchUsers() {
  try {
    // 获取用户列表
    const listResult = await userService.getUserList(1, 10);
    console.log('用户列表:', listResult.data);

    // 创建用户
    const createResult = await userService.createUser({
      name: 'John Doe',
      age: 30,
    });
    console.log('创建用户结果:', createResult.data);
  } catch (error) {
    console.error('请求出错:', error);
  }
}

fetchUsers();
```

### 使用增强功能（防抖、重试等）

```typescript
import { HttpApi, Get, Debounce, Retry } from 'axios-plus';

@HttpApi({
  baseURL: 'https://api.example.com',
})
class SearchService {
  // 带防抖的搜索接口（300ms内多次调用只会执行一次）
  @Get('/search')
  @Debounce(300)
  search(@QueryParam('keyword') keyword: string) {}

  // 带重试的请求（失败时重试3次）
  @Get('/data')
  @Retry(3)
  fetchData() {}
}
```

### 本地 Mock 配置

```typescript
import { HttpApi, Get, Mock } from 'axios-plus';
import { HttpResponse } from 'msw';

@HttpApi({
  baseURL: 'https://api.example.com',
})
class MockDemoService {
  @Get('/mock-data')
  @Mock({
    // 定义mock处理器
    success: () =>
      HttpResponse.json({
        code: 200,
        data: ['item1', 'item2'],
        message: 'success',
      }),
    error: () =>
      HttpResponse.json({
        code: 500,
        message: 'error',
      }),
  })
  getMockData() {}
}

// 使用mock
const service = new MockDemoService();
// 调用时指定使用哪个mock处理器
service
  .getMockData()('success')
  .then(res => console.log(res.data));
```

### AOP 切面使用

```typescript
import { HttpApi, Get, Aspect, Before } from 'axios-plus';

// 定义切面
@Aspect
class LogAspect {
  // 前置通知 - 打印请求信息
  @Before('UserService.get*')
  logBefore(context: any) {
    console.log('请求即将发送:', context.args);
  }
}

@HttpApi({ baseURL: 'https://api.example.com' })
class UserService {
  @Get('/users')
  getUserList() {}
}
```
