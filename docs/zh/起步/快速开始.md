# 快速开始

## 安装

使用`npm`或`yarn`安装`axios-plus`：

```bash
# 使用npm
npm install axios-plus --save

# 使用yarn
yarn add axios-plus
```

## 环境要求

由于`axios-plus`大量采用了装饰器语法，所以需要使用`TypeScript`进行开发。你必须要在你的项目中安装`TypeScript`环境，并为`tsconfig.json`添加以下配置：

```json
{
  "compilerOptions": {
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true
  }
}
```

## 基本使用

```typescript {6,10-13,17,21-31}
@HttpApi({
  baseURL: 'http://localhost:3000/users',
})
class UserApi {
  // 等价于 axios.get('http://localhost:3000/users')
  @Get('/')
  getAllUsers(): any {}
  // 等价于 axios.get(`http://localhost:3000/users/${id}`)
  // 失败时请求重发次数为3
  @Get({
    url: '/:id',
    retry: 3,
  })
  getUserById(@PathParam('id') id: number): any {}

  // 允许请求体参数
  @Post('/')
  addUser(@BodyParam() data: { name: string; age: number }): any {}

  // 允许定义为mock接口
  @Get({
    url: '/page',
    mock: {
      handlers: () => {
        return HttpResponse.json({
          data: [1, 2, 3],
          total: 3,
        });
      },
    },
  })
  getPage(@QueryParam('page') page: number, @QueryParam('size') size: number): any {}
}
```

## 使用原生 axios

如果你需要使用原生`axios`库，你可以直接导入`axiosPlus`，然后像使用`axios`一样使用`axiosPlus`，下面是一个拦截器的案例：

```typescript
import { axiosPlus } from 'axios-plus';
axiosPlus.interceptors.request.use(config => {
  console.log('请求拦截器', config);
  return config;
});
```
